<!doctype html>

<html>
<head>
<meta charset="utf-8">
<title>电商平台首页</title>
<!--js-->
<script src="../js/jquery-1.8.2.min.js"></script>
<script src="../js/common.js"></script>
<script src="../js/jquery.easing.1.3.js"></script>
<script src="../js/ddsmoothmenu.js"></script>
<script src="../js/jquery.flexslider.js"></script>
<script src="../js/jquery.elastislide.js"></script>
<script src="../js/jquery.jcarousel.min.js"></script>
<script src="../js/jquery.accordion.js"></script>
<script src="../js/light_box.js"></script>
<script type="text/javascript">
	$(document).ready(function() {
		$(".inline").colorbox({
			inline : true,
			width : "50%"
		});
	});
</script>
<!--end js-->

<!-- Mobile Specific Metas ================================================== -->
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1">

<!-- CSS ================================================== -->

<link rel="stylesheet" href="../css/style.css">
<link rel="stylesheet" href="../css/orange.css">
<link rel="stylesheet" href="../css/skeleton.css">
<link rel="stylesheet" href="../css/layout.css">
<link rel="stylesheet" href="../css/ddsmoothmenu.css" />
<link rel="stylesheet" href="../css/elastislide.css" />
<link rel="stylesheet" href="../css/home_flexslider.css" />

<link rel="stylesheet" href="../css/light_box.css" />
<link rel="stylesheet" href="../css/cart.css" />
<script src="../js/html5.js"></script>


</head>
<body>
	<div class="mainContainer sixteen container">
		<!--Header Block-->
		<div class="header-wrapper">
			<header class="container">
				<div class="head-right">
					<ul class="top-nav">
						<li class=""><a href="404_error.html" title="我的账户">我的账户</a></li>
						<li class="my-wishlist"><a href="404_error.html" title="我的收藏">我的收藏</a></li>
						<li class="contact-us"><a href="contact_us.html" title="联系我们">联系我们</a></li>
						<li class="checkout"><a href="404_error.html" title="付款">付款</a></li>
						<li class="log-in"><a href="login.html" title="登录">登录</a></li>
					</ul>
					<ul class="currencyBox">
						<li id="header_currancy" class="currency"><a
							class="mainCurrency" href="#">币种: RMB</a>
							<div id="currancyBox" class="currency_detial">
								<a href="#">￥</a> <a href="#"></a> <a href="#">$</a>
							</div></li>
					</ul>
					<section class="header-bottom">
						<div class="cart-block">
							<ul>
								<li>(2)</li>
								<li><a href="cart.html" title="Cart"><img title="Item"
										alt="Item" src="../images/item_icon.png" /></a></li>
								<li>Item</li>
							</ul>
							<div id="minicart" class="remain_cart" style="display: none;">
								<p class="empty">购物车中有(2)件商品</p>
								<ol>
									<li>
										<div class="img-block">
											<img src="../images/small_img.png" title="" alt="" />
										</div>
										<div class="detail-block">
											<h4>
												<a href="#" title="Htc Mobile 1120">Htc Mobile 1120</a>
											</h4>
											<p>
												<strong>1</strong> x $900.00
											</p>
											<a href="#" title="Details">Details</a>
										</div>
										<div class="edit-delete-block">
											<a href="#" title="编辑"><img src="../images/edit_icon.png"
												alt="编辑" title="编辑" /></a> <a href="#" title="删除"><img
												src="../images/delete_item_btn.png" alt="删除" title="删除" /></a>
										</div>
									</li>
									<li>
										<div class="img-block">
											<img src="../images/small_img.png" title="" alt="" />
										</div>
										<div class="detail-block">
											<h4>
												<a href="#" title="Htc Mobile 1120">Htc Mobile 1120</a>
											</h4>
											<p>
												<strong>1</strong> x $900.00
											</p>
											<a href="#" title="Details">Details</a>
										</div>
										<div class="edit-delete-block">
											<a href="#" title="编辑"><img src="../images/edit_icon.png"
												alt="编辑" title="编辑" /></a> <a href="#" title="删除"><img
												src="../images/delete_item_btn.png" alt="删除" title="删除" /></a>
										</div>
									</li>
									<li>
										<div class="total-block">
											总计：<span>￥1,900.00</span>
										</div> <a href="cart.html" title="付款" class="orange-btn">付款</a>
										<div class="clear"></div>
									</li>
								</ol>
							</div>
						</div>
						<div class="search-block">
							<input type="text" placeholder="搜索商品" /> <input type="submit"
								value="搜索" title="搜索商品" />
						</div>
					</section>
				</div>
				<h1 class="logo">
					<a href="index.html" title="Logo"> <img title="Logo" alt="Logo"
						src="../images/logo.jpg" />
					</a>
				</h1>
				<nav id="smoothmenu1" class="ddsmoothmenu mainMenu">
					<ul id="nav">
						<li class="active"><a href="index-2.html" title="Home">首页</a></li>
						<li class=""><a href="category.html" title="商品类别">商品类别</a>
							<ul>
								<li><a href="category.html">女装</a></li>
								<li><a href="category.html">男装</a></li>
								<li><a href="category.html">饰品</a></li>
								<li><a href="category.html">移动设备</a>
									<ul>
										<li><a href="category.html">二级类别</a></li>
										<li><a href="category.html">二级类别</a></li>
										<li><a href="category.html">二级类别</a></li>
										<li><a href="category.html">二级类别</a></li>
										<li><a href="category.html">二级类别</a></li>
										<li><a href="category.html">二级类别</a></li>
									</ul></li>
								<li><a href="category.html">鞋</a></li>
								<li><a href="category.html">其他</a></li>
							</ul></li>
						<li class=""><a href="blog.html" title="博客">博客</a></li>
						<li class=""><a href="faq.html" title="FAQ">FAQ</a></li>
						<li class=""><a href="about_us.html" title="关于我们">关于我们</a></li>
						<li class=""><a href="404_error.html" title="Pages">Pages</a></li>
						<li class=""><a href="contact_us.html" title="联系我们">联系我们</a></li>
					</ul>
				</nav>

				<div class="mobMenu">
					<h1>
						<span>菜单</span> <a class="menuBox highlight"
							href="javascript:void(0);">ccc</a> <span class="clearfix"></span>
					</h1>
					<div id="menuInnner" style="display: none;">
						<ul class="accordion">
							<li class="active"><a href="index.html" title="主页">主页</a></li>
							<li class="parent"><a href="category.html" title="类别">类别</a>
								<ul>
									<li><a href="category.html">女装</a></li>
									<li><a href="category.html">男装</a></li>
									<li><a href="category.html">饰品</a></li>
									<li><a href="category.html">移动设备</a>
										<ul>
											<li><a href="category.html">二级类别</a></li>
											<li><a href="category.html">二级类别</a></li>
											<li><a href="category.html">二级类别</a></li>
											<li><a href="category.html">二级类别</a></li>
											<li><a href="category.html">二级类别</a></li>
											<li><a href="category.html">二级类别</a></li>
										</ul></li>
									<li><a href="category.html">鞋</a></li>
									<li><a href="category.html">其他</a></li>
								</ul></li>
							<li class=""><a href="blog.html" title="博客">博客</a></li>
							<li class=""><a href="faq.html" title="Faq">Faq</a></li>
							<li class=""><a href="about_us.html" title="关于我们">关于我们</a></li>
							<li class=""><a href="404_error.html" title="Pages">Pages</a></li>
							<li class=""><a href="contact_us.html" title="联系我们">联系我们</a></li>
							<span class="clearfix"></span>
						</ul>

					</div>
				</div>

			</header>
		</div>
		<!--Content Block-->
		<section class="content-wrapper">
			<div class="content-container container">
				<div class="col-1-layout">
					<ul class="shopping-cart-table">
						<!-- <li>
							<div class="img-box">
								<img src="../images/cart_img.png" title="" alt="" />
							</div> <a class="edit-btn" href="#" title="编辑">编辑</a>
						</li>
						<li>
							<div class="remove-item-btn">
								<a href="#" title="Remove"><img
									src="../images/delete_item_btn.png" title="删除" alt="删除" /></a>
							</div>
							<div class="pro-name">Htc one 1120</div>
							<div class="pro-qty">
								<input type="text" value="1" />
							</div>
							<div class="pro-price">￥1,000.00</div>
						</li> -->

						<table width="100%" style="text-align: left;">
							<thead>
								<th>全选</th>
								<th>商品</th>
								<th>单价</th>
								<th>数量1</th>
								<th>数量2</th>
								<th>数量3</th>
								<th>小计</th>
								<th>操作</th>
							</thead>
							<tbody id="cartBody">

							</tbody>
						</table>

					</ul>
					<div class="show-option-block">
						<a href="#" title="Show Options">显示选项</a>
					</div>
					<div class="update-shopping-cart">
						<button class="orange-btn">更新购物车</button>
					</div>
					<div class="shopping-cart-collaterals">
						<div class="cart-box">
							<div class="box-title">折扣</div>
							<div class="box-content">
								<p>如果您有优惠券，请输入您的优惠券代码</p>
							</div>
							<button class="orange-btn" title="Apply Coupon">使用优惠券</button>
						</div>
						<div class="cart-box">
							<div class="box-title">运费及税估价;</div>
							<div class="box-content">
								<p>Enter your destnation to get a shipping estimate</p>
								<ul>
									<li><label>国家<em>*</em></label> <select><option>中国</option></select>
									</li>
									<li><label>地区</label> <select><option>请选择地区、州或省</option></select>
									</li>
									<li><label>邮编</label> <input type="text" /></li>
								</ul>
							</div>
							<button class="orange-btn" title="获取报价">获取报价</button>
						</div>
					</div>
					<div class="shopping-cart-totals">

						<div class="grand-row">
							<div class="left">总计</div>
							<div class="right" id="SumPrice"></div>
						</div>
						<ul class="checkout-types">
							<li><button class="orange-btn" title="付款"
									onclick="location.href='order.html'">付款</button></li>
							<li><a href="#" title="更多地址">更多地址</a></li>
						</ul>
					</div>
					<div class="generic-product-list">
						<h4>猜你喜欢：</h4>
						<ul>
							<li>
								<div class="left-img">
									<img src="../images/tshir_img.png" title="" alt="" />
								</div>
								<div class="right-content">
									<div class="pro-name">
										White Round Neck <br>T-Shirt
									</div>
									<div class="pro-price">$600.00</div>
									<div class="add-cart-row">
										<button class="orange-btn" title="添加购物车">添加购物车</button>
									</div>
									<a href="#" class="add-wishlist" title="添加收藏">添加收藏</a> <a
										href="#" class="add-compare" title="同类比较">同类比较</a>
								</div>
							</li>
							<li>
								<div class="left-img">
									<img src="../images/tshir_img.png" title="" alt="" />
								</div>
								<div class="right-content">
									<div class="pro-name">
										White Round Neck <br>T-Shirt
									</div>
									<div class="pro-price">$600.00</div>
									<div class="add-cart-row">
										<button class="orange-btn" title="添加购物车">添加购物车</button>
									</div>
									<a href="#" class="add-wishlist" title="添加收藏">添加收藏</a> <a
										href="#" class="add-compare" title="同类比较">同类比较</a>
								</div>
							</li>
							<li>
								<div class="left-img">
									<img src="../images/tshir_img.png" title="" alt="" />
								</div>
								<div class="right-content">
									<div class="pro-name">
										White Round Neck <br>T-Shirt
									</div>
									<div class="pro-price">$600.00</div>
									<div class="add-cart-row">
										<button class="orange-btn" title="添加购物车">添加购物车</button>
									</div>
									<a href="#" class="add-wishlist" title="添加收藏">添加收藏</a> <a
										href="#" class="add-compare" title="同类比较">同类比较</a>
								</div>
							</li>
							<li>
								<div class="left-img">
									<img src="../images/tshir_img.png" title="" alt="" />
								</div>
								<div class="right-content">
									<div class="pro-name">
										White Round Neck <br>T-Shirt
									</div>
									<div class="pro-price">$600.00</div>
									<div class="add-cart-row">
										<button class="orange-btn" title="添加购物车">添加购物车</button>
									</div>
									<a href="#" class="add-wishlist" title="添加收藏">添加收藏</a> <a
										href="#" class="add-compare" title="同类比较">同类比较</a>
								</div>
							</li>
						</ul>
					</div>
				</div>
				<div class="clearfix"></div>
				<div class="news-letter-container">
					<div class="free-shipping-block">
						<h1>ENJOY FREE SHIPPING</h1>
						<p>on all orders as our holiday gift for you!</p>
					</div>
					<div class="news-letter-block">
						<h2>SIGN UP FOR OUR NEWSLETTER</h2>
						<input type="text" value="Enter email address" title="" /> <input
							class="submit-btn" type="submit" value="Submit" title="Submit" />
					</div>
				</div>
			</div>
		</section>
	</div>
	<!--页脚开始-->
	<section class="footer-wrapper">
		<footer class="container">
			<div class="link-block">
				<ul>
					<li class="link-title"><a href="about_us.html" title="关于我们">关于我们</a></li>
					<li><a href="about_us.html" title="关于我们">关于我们</a></li>
					<li><a href="#" title="用户服务">用户服务</a></li>
					<li><a href="#" title="隐私策略">隐私策略</a></li>
				</ul>
				<ul>
					<li class="link-title"><a href="#" title="客户服务">客户服务</a></li>
					<li><a href="#" title="退货/换货">退货/换货</a></li>
					<li><a href="#" title="购物保障">购物保障</a></li>
					<li><a href="contact_us.html" title="联系我们">联系我们</a></li>
				</ul>
				<ul>
					<li class="link-title"><a href="#" title="条款和条件">条款和条件</a></li>
					<li><a href="#" title="驿站">驿站</a></li>
					<li><a href="#" title="帮助">帮助</a></li>
					<li><a href="#" title="Terms & Conditions">Terms &
							Conditions</a></li>
				</ul>
				<ul>
					<li class="link-title"><a href="#" title="关于我们">关于我们</a></li>
					<li class="aboutus-block">Lorem ipsum dolor sit amet,
						consectetur adipiscing elit. Vivamus sit amet ligula lectus, a
						mollis diam. Nulla porttitor pulvinar elit... <a
						href="about_us.html" title="更多">更多</a>
					</li>
				</ul>
				<ul class="stay-connected-blcok">
					<li class="link-title"><a href="#" title="保持联系">保持联系</a></li>
					<li>
						<ul class="social-links">
							<li><a data-tooltip="Like us on facebook" href="#"><img
									alt="facebook" src="../images/facebook.png"></a></li>
							<li><a data-tooltip="Subscribe to RSS feed" href="#"><img
									alt="RSS" src="../images/rss.png"></a></li>
							<li><a data-tooltip="Follow us on twitter" href="#"><img
									alt="twitter" src="../images/twitter.png"></a></li>
							<li><a data-tooltip="Follow us on Dribbble" href="#"><img
									alt="dribbble" src="../images/dribbble.png"></a></li>
							<li><a data-tooltip="Follow us on Youtube" href="#"><img
									alt="youtube" src="../images/youtube.png"></a></li>
							<li><a data-tooltip="Follow us on skype" href="#"><img
									alt="skype" src="../images/skype.png"></a></li>
						</ul>
						<div class="payment-block">
							<img src="../images/payment.png" alt="payment">
						</div>
					</li>
				</ul>
			</div>
			<div class="footer-bottom-block">
				<ul class="bottom-links">
					<li><a href="index-2.html" title="主页">主页</a></li>
					<li><a href="#" title="Pages">PAGES</a></li>
					<li><a href="about_us.html" title="关于">关于</a></li>
					<li><a href="contact_us.html" title="联系我们">联系我们</a></li>
				</ul>
				<p class="copyright-block">
					Copyright &copy; 2017.杨帆远航技术有限公司.<a target="_blank"
						href="http://www.yfyh.com/">&#x7F51;&#x9875;&#x6A21;&#x677F;</a>
				</p>
			</div>
		</footer>
	</section>
	<!--页脚结束-->
</body>

<script type="text/javascript">
	//添加商品
	function ShowCartList() {
		$("#cartBody").empty();
		$.ajax({
			type : "POST",
			url : "/DianShangMaven/portal/cart/list.do",
			// async : false, */
			dataType : "Json",
			success : function(response) {
				console.log(response);
				var status = response.status;
				if (status == 1) {
					//alert("已成功加入购物车！！！");
					var cartProducts = response.data.cartProductVolist;
					for (var i = 0; i < cartProducts.length; i++) {
						var trCart = $("<tr></tr>");
						if (cartProducts[i].productChecked == 1) {
							trCart.append("<td><input type='checkbox' checked='true' /></td>")
						} else {
							trCart.append("<td><input type='checkbox' /></td>")
						}
						trCart.append("<td width='35%'> <img src='"+response.data.imageHost+"/"+cartProducts[i].productMainImage+"' style='height: 62px;width:100px;' /> <span style='margin-left:40px;position:relative;top:-45px;'> "
										+ cartProducts[i].productSubtitle
										+ "</span> </td>")
						trCart.append("<td>"+ cartProducts[i].productPrice+ "</td>");
						trCart.append("<td>" + cartProducts[i].quantity+ "</td>") 
						trCart.append("<td width='15%'> <span class='qty-box'> <label for='qty'>购买数量：</label> <a onclick = 'CartProductCountAdd("+cartProducts[i].id+")'  title='' class='prev jian'><img src='../images/qty_prev.png' title='' alt='add' /></a> <input style='width:30px;' type='text' value='"+ cartProducts[i].quantity+"' maxlength='12' id='qty' class='input-text qty' name='qty'  > <a onclick = 'CartProductCountJia("+cartProducts[i].id+")'  title='' class='next dec add'><img src='../images/qty_next.png' title='' alt='' /></a></span></td>");
						trCart.append("<td><a class='option' onclick='nextOpt(this,"+cartProducts[i].productId+")'>-</a><span>"+cartProducts[i].quantity+"</span><a class='option' onclick='nextOption(this,"+cartProducts[i].productId+")'>+</a></td>");
						/*****************/
						trCart.append("<td>"+ cartProducts[i].productTotalPrice+ "</td>")
						trCart.append("<td> <a onclick = 'DeleteCartProduct("+ cartProducts[i].productId+ ")' href:'#'>删除</a></td>")
						$("#cartBody").append(trCart);
					}
					$("#SumPrice").text("￥" + response.data.cartTotalPrice);

				} else {
					alert("账号信息丢失，请重新登录后尝试！！！");
					window.location.href = "login.html";
				}
			}
		})
	}

	ShowCartList();
//删除商品
	function DeleteCartProduct(cartProductId) {
		$.ajax({
			type : "POST",
			url : "/DianShangMaven/portal/cart/delete_product.do",
			data : {
				"proId" : cartProductId
			},
			// async : false, 
			dataType : "Json",
			success : function(response) {
				console.log(response);
				var status = response.status;
				if (status == 0) {
					alert("操作失败，请重试！！！");
				}
				if (status == 1) {
					alert("删除成功！！！");
					ShowCartList();
				}
			}
		})
	}
	//修改商品数量
	function nextOption(a,pd){
		console.log($(a).prev().text());//a.prev()返回上一个节点=span
		var qua=$(a).prev().text();
		qua=parseInt(qua)+1;
		$(a).prev().text(qua);
		$.ajax({
			url:"/DianShangMaven/portal/cart/update_product.do",
			type:'get',
			data:{
				proId:pd,
				count:qua
			},
			dataType:"json",
			success:function(response){
				if(response.status==1){
					ShowCartList();
				}else  {
					alert("修改失败");
				}
			}
			
		})
	}
	function nextOpt(a,pd){
		var qua=$(a).next().text();
		qua=parseInt(qua)-1;
		if(qua<=1){
			$(a).next().text(1);
		}else{
			$(a).next().text(qua);
		}
		$.ajax({
			url:"/DianShangMaven/portal/cart/update_product.do",
			type:'get',
			data:{
				proId:pd,
				count:qua
			},
			dataType:"json",
			success:function(response){
				if(response.status==1){
					ShowCartList();
				}else  {
					alert("修改失败");
				}
			}
		})	
	}
	
	
	
</script>

<script type="text/javascript">
//修改商品数量
	/* var valueAdd = -1;
	var valueJia = 1;
	function CartProductCountAdd(cartId){
		$.ajax({
			type : "POST",
			url : "/DianShangMaven/portal/cart/update_product.do",
			data : {
				"pId" : cartId,
				"count":valueAdd
			},
			// async : false, 
			dataType : "Json",
			success : function(response) {
				console.log(response);
				var status = response.status;
				if (status == 0) {
					
				}
				if (status == 1) {
					
					ShowCartList();
				}
			}
		})
	}
	
	function CartProductCountJia(cartId){
		$.ajax({
			type : "POST",
			url : "/DianShangMaven/portal/cart/update_product.do",
			data : {
				"cartId" : cartId,
				"count":valueJia
			},
			// async : false, 
			dataType : "Json",
			success : function(response) {
				console.log(response);
				var status = response.status;
				if (status == 0) {
					
				}
				if (status == 1) {
					
					ShowCartList();
				}
			}
		})
	} */

</script>
</html>